<%
CalendarDateSelect.format = :natural
%>
<% semantic_form_for @activity do |form| %>

  <% form.inputs do %>
    <li id="activity_date_of_activity_input" class="string required">
      <%= form.label :date_of_activity %>
      <%= form.calendar_date_select :date_of_activity, :buttons => false %>
    </li>
    <%= form.input :objective %>
    <%= form.input :activity_type %>
    <%= form.input :intensity_level %>
    <%= form.input :ta_categories, :as => :check_boxes %>
    <%= form.input :collaborating_agencies, :as => :check_boxes %>
    <%= form.input :description %>
  <% end %>
  <% form.inputs do %>
    <div>
      <em>Select States</em><br/>
      <% (0..3).each do |col| %>
        <div class="span-4 <%= 'last' if col == 3 %>">
          <ul style="padding: 4px 12px">
          <%# states grouped into columns, 15 states per column %>
          <% @states[(col*15)..((col+1)*14)].each do |state| %>
            <li>
              <% checked = form.object.state_ids.include?(state.id) ? true : false %>
              <%= check_box_tag "activity[state_ids][]", state.id, checked, {:id => "activity_state_ids_#{state.id}"} %>
              <%= label_tag "activity_state_ids[#{state.id}]", state.name_or_abbrev %>
            </li>
          <% end %>
          </ul>
        </div>
      <% end %>
    </div>
  <% end %>
  <%= form.submit %>
<% end %>

<% content_for :javascript do %>
  <%= calendar_date_select_includes 'tacs' %>
<% end %>


<% content_for :javascript do %>
<script type="text/javascript">
  Event.observe(window, 'load', function() {
    Event.addBehavior({
      '#activity_description': TextareaExpander
    })
  })
</script>
<% end %>
